{% load i18n %}
{% if active %}
  <div class="show-loading" hx-get="{% url 'categories_table_active' %}" hx-trigger="updated from:window"
       hx-swap="outerHTML">
{% else %}
  <div class="show-loading" hx-get="{% url 'categories_table_archived' %}" hx-trigger="updated from:window"
       hx-swap="outerHTML">
{% endif %}
{% if categories %}
  <div>
    <c-config.search></c-config.search>
    <div class="overflow-x-auto">
      <table class="table table-zebra">
        <thead>
        <tr>
          <th scope="col" class="table-col-auto"></th>
          <th scope="col">{% translate 'Name' %}</th>
          <th scope="col">{% translate 'Muted' %}</th>
        </tr>
        </thead>
        <tbody>
        {% for category in categories %}
          <tr class="category">
            <td class="table-col-auto text-center">
              <div class="join" role="group" aria-label="{% translate 'Actions' %}">
                <a class="btn btn-secondary btn-sm join-item"
                   role="button"
                   hx-swap="innerHTML"
                   data-tippy-content="{% translate "Edit" %}"
                   hx-get="{% url 'category_edit' category_id=category.id %}"
                   hx-target="#generic-offcanvas">
                  <i class="fa-solid fa-pencil fa-fw"></i></a>
                {% if not category.owner %}
                  <a class="btn btn-secondary btn-sm join-item"
                     role="button"
                     data-tippy-content="{% translate "Take ownership" %}"
                     hx-get="{% url 'category_take_ownership' category_id=category.id %}">
                    <i class="fa-solid fa-crown fa-fw"></i></a>
                {% endif %}
                {% if user == category.owner %}
                  <a class="btn btn-secondary btn-sm join-item"
                     role="button"
                     hx-target="#generic-offcanvas"
                     hx-swap="innerHTML"
                     data-tippy-content="{% translate "Share" %}"
                     hx-get="{% url 'category_share_settings' pk=category.id %}">
                    <i class="fa-solid fa-share fa-fw"></i></a>
                {% endif %}
                <a class="btn btn-error btn-sm join-item"
                   role="button"
                   data-tippy-content="{% translate "Delete" %}"
                   hx-delete="{% url 'category_delete' category_id=category.id %}"
                   hx-trigger='confirmed'
                   hx-swap="innerHTML"
                   data-bypass-on-ctrl="true"
                   data-title="{% translate "Are you sure?" %}"
                   data-text="{% translate "You won't be able to revert this!" %}"
                   data-confirm-text="{% translate "Yes, delete it!" %}"
                   _="install prompt_swal"><i class="fa-solid fa-trash fa-fw"></i></a>
              </div>
            </td>
            <td>{{ category.name }}</td>
            <td>
              {% if category.mute %}<i class="fa-solid fa-check text-success"></i>{% endif %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% else %}
  <c-msg.empty title="{% translate "No categories" %}" remove-padding></c-msg.empty>
{% endif %}
</div>

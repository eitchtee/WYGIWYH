{% extends 'extends/offcanvas.html' %}
{% load month_name %}
{% load i18n %}

{% block title %}{% translate 'Pick a month' %}{% endblock %}

{% block body %}
  {% regroup month_year_data by year as years_list %}

  <div role="tablist" class="tw:tabs tw:tabs-bordered tw:w-full" id="yearTabs">
    {% for x in years_list %}
      <input type="radio" 
             name="year_tabs" 
             role="tab" 
             class="tw:tab" 
             aria-label="{{ x.grouper }}"
             id="tab-{{ x.grouper }}"
             {% if x.grouper == current_year %}checked="checked"{% endif %} />
      <div role="tabpanel" class="tw:tab-content tw:p-4" id="{{ x.grouper }}-pane">
        <ul class="tw:menu tw:bg-base-100 tw:w-full" id="month-year-list" hx-boost="true">
          {% for month_data in x.list %}
            <li {% if month_data.month == current_month and month_data.year == current_year %}class="tw:disabled"{% endif %}>
              <a class="{% if month_data.month == current_month and month_data.year == current_year %}tw:active{% endif %}"
                 href={{ month_data.url }}
                 {% if month_data.month == current_month and month_data.year == current_year %}aria-disabled="true"{% endif %}>
                <span class="tw:flex-1">{{ month_data.month|month_name }}</span>
                <span class="tw:badge tw:badge-primary">{{ month_data.transaction_count }}</span>
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
  </div>
  <hr class="tw:border-base-300">
  <div class="tw:w-full tw:text-end">
    <a class="tw:btn tw:btn-outline tw:btn-primary tw:btn-sm" href="{{ today_url }}" role="button" hx-boost="true">{% trans 'Today' %}</a>
  </div>
{% endblock %}
